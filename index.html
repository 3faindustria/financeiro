<!DOCTYPE html>
<html lang="pt-BR">
<body>
    <h1>Validação de API Nomus</h1>
    <button onclick="testarConexao()">Testar Requisição Direta</button>
    <hr>
    <h3>Retorno do Servidor:</h3>
    <pre id="output" style="background: #eee; padding: 10px; border: 1px solid #ccc;">
        Aguardando clique...
    </pre>

    <script>
        async function testarConexao() {
            const out = document.getElementById("output");
            out.textContent = "Chamando API... aguarde.";

            try {
                const response = await fetch('/api/consultar');
                const data = await response.json();
                
                // Formata o JSON para ficar legível na tela
                out.textContent = JSON.stringify(data, null, 4);
            } catch (erro) {
                out.textContent = "Erro na chamada local: " + erro.message;
            }
        }
    </script>
</body>
</html>
